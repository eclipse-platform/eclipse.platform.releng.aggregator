<!DOCTYPE html>
<html>

<head>
	<!--TODO: set proper title and metadata -->
	<title>Eclipse Project Downloads</title>
	<link rel="preconnect stylesheet" href="../page.css" /><!-- Replaced by a refernece to a contained copy on deployment -->
	<script src="../page.js"></script><!-- Replaced by a refernece to a contained copy on deployment -->
</head>

<body>
	<div data-generate="generateDefaultBreadcrumb(this, eclipseBreadcrumbBase)">
		<span>Downloads</span>
	</div>

	<main>
		<h1>The Eclipse Project Downloads</h1>
		<!--TODO: check all the links and migrate them if necessary-->
		<p>
			On this page you can find the latest builds produced by the <a href="https://www.eclipse.org/eclipse/">Eclipse Project</a>.
			To get started, run the program and go through the user and developer documentation provided in the help system or see the <a href="https://help.eclipse.org/">web-based help system</a>.
			If you have problems installing or getting the workbench to run, <a href="https://wiki.eclipse.org/The_Official_Eclipse_FAQs">check out the Eclipse Project FAQ</a>, or try posting a question to the <a href="https://www.eclipse.org/forums/">forum</a>.
		</p>
		<p>
			See the <a href="https://www.eclipse.org/downloads/">main Eclipse Foundation download site</a> for convenient all-in-one packages.
			The <a href="https://archive.eclipse.org/eclipse/downloads/">archive site</a> contains older releases (including the last 3.x version, <a href="https://archive.eclipse.org/eclipse/downloads/drops/R-3.8.2-201301310800/">3.8.2</a>).
			For reference, see also the <a href="https://wiki.eclipse.org/Eclipse_Project_Update_Sites">p2 repositories provided</a>, and the <a href="https://www.eclipse.org/eclipse/platform-releng/buildSchedule.html">build schedule</a>.
		</p>
		<h3 id="latest-downloads">Latest Downloads</h3>
		<table class="builds-table" data-path="latest"></table>

		<h3 id="latest-release">Latest Releases</h3>
		<dialog class="details-popup">
			<h3>Latest Releases</h3>
			<em>Releases</em> are builds that have been declared as release for the general public - for example <code>R4.38</code>.
			Releases are the right builds for people who want to be on a stable, tested release, and don't need the latest greatest features and improvements.
			Release builds always have an "R" at the beginning of the name i.e. <code>R4.0</code>, <code>R4.37</code> etc.
			<h4>Retention policy</h4>
			Releases are retained indefinitely.<br>
			However, only the build websites of the last three releases are provided at this main download area.
			Older releases are available in the <a href="https://archive.eclipse.org/eclipse/downloads/">Eclipse Archive</a>.
			Links to artifacts, that were later moved to the archive, are transparently redirected and continue to work.
			Similarly the P2-repositories of only the last ten releases are provided in this download area and older repositories are moved to the archive.
			Again, links pointing to P2-repositories at this main download area continue to work, even after a repository was moved to the archive.
		</dialog>
		<table class="builds-table" data-path="releases"></table>

		<h3 id="stable-builds">Stable Builds</h3>
		<dialog class="details-popup">
			<h3>Stable Builds</h3>
			<em>Stable builds</em> are <em>integration builds</em> that have been found to be stable enough for most people to use.
			They are promoted from <em>integration</em> to <em>stable build</em> on a regular schedule, as <em>milestones</em> or <em>release-candidates</em> and after they have been used for a few days and deemed reasonably stable.
			The latest stable build is the right build for people who want to stay up to date with what is going on in the latest development stream, and don't mind putting up with a few problems in order to get the latest greatest features and bug fixes.
			The latest stable build is the one the development team likes people to be using, because of the valuable and timely feedback.
			<h4>Retention policy</h4>
			Stable builds and their P2-repositories are retained until the targeted release is published.
		</dialog>
		<table class="builds-table" data-path="stableBuilds"></table>

		<h3 id="integration-builds">Integration Builds</h3>
		<dialog class="details-popup">
			<h3>Integration Builds</h3>
			An <em>Integration build</em> (short <em>I-Build</em>) is usually produced once a day and reflects the latest development state of the main branches of all contributing Git repositories.
			Even though changes are developed with great diligence, I-Builds are more likely to contain bugs and functionality degradations may occur temporarily.
			In case of a severe problem the corresponding I-Build is marked as <em>unstable</em>.
			I-Builds are recommended for developers of Eclipse itself and for those interested in testing the very latest features, bug-fixes and state.
			<h4>Retention policy</h4>
			The build website of an I-Build is retained for at least five days.
			From older I-Builds only the first (not unstable) build of a week is retained until the targeted release is published.
			The p2-repository of each I-Build is retained until the targeted release is published.
		</dialog>
		<table class="builds-table" data-path="iBuilds"></table>

		<h3 id="beta-java-builds">Beta Java Builds</h3>
		<dialog class="details-popup">
			<h3>Beta Java Builds</h3>
			<em>Beta Java Builds</em> provide the latest development state of the support for the upcoming, not yet released <em>Java</em> version
			in Eclipse JDT's Java Compiler ECJ, UI and debug support.
			These builds are produced regularly from dedicated <em>beta</em> branches in the JDT Git repositories.
			<h4>Retention policy</h4>
			For <em>Beta Java Builds</em> the websites of last nine builds are retained.
			The corresponding P2-repositories are retained until the next development cycle respectively the targeted java version is released.
		</dialog>
		<table class="builds-table" data-path="yBuilds"></table>

	</main>
	<script>
		loadPageData('data.json')

		const TWELVE_HOURS_AGO = new Date()
		TWELVE_HOURS_AGO.setTime(TWELVE_HOURS_AGO.getTime() - 12 * 60 * 60 * 1000)
		const TWENTYFOUR_HOURS_AGO = new Date()
		TWENTYFOUR_HOURS_AGO.setTime(TWENTYFOUR_HOURS_AGO.getTime() - 24 * 60 * 60 * 1000)

		contentPostProcessor = (mainElement, contentData) => {
			const dataTables = Array.from(mainElement.getElementsByClassName('builds-table'))
			for (const table of dataTables) {
				const dataPath = table.getAttribute('data-path');
				const tableData = dataPath != 'latest'
					? getValue(contentData, dataPath)
					// Filter latest stable-build if none is available (e.g. shortly after a release)
					: [contentData.releases[0], contentData.stableBuilds[0], contentData.iBuilds[0]].filter(v => v !== undefined)

				if (tableData.length === 0) { // Remove section if empty, e.g. stable-builds shortly after a release
					table.previousElementSibling.remove() // Remove headline
					table.remove()
					continue
				}
				table.createTHead().innerHTML = `
					<tr>
						<th>Build Name</th>
						<th>Build Status</th>
						<th>Build Date (UTC)</th>
					</tr>
				`
				const tBody = table.createTBody()
				for (const build of tableData) {
					tBody.insertRow().innerHTML = `
					<td>
						<a href="${build.path}">${build.label}</a>
					</td>
					<td>
						<a href="${build.path}">
							<img src="${getStatusIcon(build)}" title="Build is available" alt="Build is available">
						</a>
						<a href="${build.path}/${build.testsPath}" title="${build.testsCompletion} test platforms finished." style="text-decoration: none">
							<img src="${getTestStatusIcon(build.testsCompletion, build.date)}"/>
							(${build.testsCompletion} tests completed)
						</a>
					</td>
					<td>${formatBuildDate(build.date)}</td>
					`
				}
			}
		}

		function getStatusIcon(buildData) {
			switch (buildData.status) {
				case 'success':
					return 'images/build_done.gif'
				case 'unstable':
					return 'images/caution.gif'
				default:
					throw new Error(`Unknown state: ${buildData.status}`)
			}
		}

		const testsCompletionStatusPattern = /^(?<completed>\d+) of (?<expected>\d+)$/

		function getTestStatusIcon(testsCompletion, date) {
			const buildDate = new Date(date)
			const matches = testsCompletionStatusPattern.exec(testsCompletion)
			const expected = parseInt(matches.groups.expected)
			const completed = parseInt(matches.groups.completed)
			if (expected == completed) {
				return 'images/junit.gif'
			} else {
				if (completed == 0 && buildDate < TWELVE_HOURS_AGO) {
					return 'images/caution.gif'
				} else if (buildDate < TWENTYFOUR_HOURS_AGO) {
					return 'images/junit.gif' // Assume tests are not running anymore
				}
				return 'images/runtests.gif'
			}
		}

		generate()

	</script>
</body>

</html>